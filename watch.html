<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Watch Movie</title>

    <link rel="stylesheet" href="watch_style.css">
    <style>
        /* General Styles */
        body,
        html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            overflow: hidden;
            background-color: black;
            font-family: Arial, sans-serif;

            /* Scrollbar Variables */
            --sb-track-color: rgba(0, 0, 0, 0);
            --sb-thumb-color: rgba(255, 255, 255, 0.5);
            --sb-size: 0.5rem;
        }

        /* Custom Scrollbar for Webkit Browsers */
        html::-webkit-scrollbar,
        body::-webkit-scrollbar {
            width: var(--sb-size);
            /* Vertical scrollbar width */
        }

        html::-webkit-scrollbar-track,
        body::-webkit-scrollbar-track {
            background: var(--sb-track-color);
            border-radius: 1.5rem;
        }

        html::-webkit-scrollbar-thumb,
        body::-webkit-scrollbar-thumb {
            background: var(--sb-thumb-color);
            border-radius: 1.5rem;
        }

        /* Ensure Firefox support */
        @supports not selector(::-webkit-scrollbar) {

            html,
            body {
                scrollbar-color: var(--sb-thumb-color) var(--sb-track-color);
            }
        }

        /* Container */
        #container {
            display: flex;
            height: 80vh;
        }

        /* Sidebar (Desktop) */
        #sidebar {
            width: 250px;
            background: rgba(0, 0, 0, 0.1);
            color: rgb(255, 255, 255);
            padding: 15px;
            overflow-y: auto;
            /* Enable vertical scrolling */
            max-height: 80vh;
        }

        /* Apply Scrollbar to Sidebar */
        #sidebar::-webkit-scrollbar {
            width: var(--sb-size);
        }

        #sidebar::-webkit-scrollbar-track {
            background: var(--sb-track-color);
            border-radius: 1.5rem;
        }

        #sidebar::-webkit-scrollbar-thumb {
            background: var(--sb-thumb-color);
            border-radius: 1.5rem;
        }

        /* Ensure Firefox support */
        @supports not selector(::-webkit-scrollbar) {
            #sidebar {
                scrollbar-color: var(--sb-thumb-color) var(--sb-track-color);
            }
        }

        #sidebar h3 {
            text-align: center;
        }

        #sidebar ul {
            list-style: none;
            padding: 0;
        }

        #sidebar ul li {
            padding: 15px;
            margin: 5px;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
            border-radius: 1.5rem;
            cursor: pointer;
        }

        #sidebar ul li:hover {
            background: rgba(255, 255, 255, 0.25);
        }

        #sidebar ul li.active {
            background: rgba(255, 255, 255, 0.5);
        }

        /* Player Section */
        #playerContainer {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        /* Mobile Dropdown */
        .mobile-only {
            width: 90%;
            padding: 10px;
            margin-bottom: 10px;
            display: none;
            background-color: black;
            color: white;
            border-radius: 1.5rem;
        }

        /* Iframe */
        iframe {
            width: 80%;
            height: 80%;
            border: none;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            #sidebar {
                display: none;
            }

            .mobile-only {
                display: block;
            }
        }

        @media (min-width: 769px) {
            #sidebar {
                display: block;
            }

            .mobile-only {
                display: none;
            }
        }

        select {
            max-width: 90%;
            /* Prevents horizontal overflow */
        }

        select option {
            white-space: nowrap;
            /* Prevents text wrapping */
            overflow: hidden;
            text-overflow: ellipsis;
        }

        select::-webkit-scrollbar {
            width: 8px;
            /* Adjust scrollbar width */
        }

        select::-webkit-scrollbar-track {
            background: #222;
            /* Dark mode support */
        }

        select::-webkit-scrollbar-thumb {
            background: #555;
            border-radius: 4px;
        }

        @media (max-width: 768px) {
            select {
                max-height: 200px;
                /* Limits dropdown height */
                overflow-y: auto;
                /* Enables scrolling */
            }
        }
    </style>
</head>

<body>
    <div id="container">
        <!-- Sidebar for Desktop -->
        <div id="sidebar">
            <h3>Servers</h3>
            <ul id="sourceList"></ul>
        </div>

        <!-- Player Section -->
        <div id="playerContainer">
            <!-- Dropdown for Mobile -->
            <select id="sourceDropdown" class="mobile-only">
                <!-- <option value="" selected disabled>Select Source</option> -->
            </select>

            <!-- Movie Iframe -->
            <iframe id="movieFrame" allowfullscreen></iframe>
        </div>
    </div>


    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const sources = [
                { name: "111Movies", url: "https://111movies.com/movie/" },
                { name: "2Embed", url: "https://www.2embed.cc/embed/" },
                { name: "AutoEmbed", url: "https://player.autoembed.cc/embed/movie/" },
                { name: "Embed.su", url: "https://embed.su/embed/movie/" },
                { name: "Flicky", url: "https://flicky.host/embed/movie/?id=" },
                { name: "GDrive Player", url: "https://databasegdriveplayer.xyz/player.php?tmdb=" },
                { name: "GoDrivePlayer", url: "https://godriveplayer.com/player.php?imdb=" },
                { name: "MoviesAPI", url: "https://moviesapi.club/movie/" },
                { name: "PStream", url: "https://iframe.pstream.org/embed/tmdb-movie-" },
                { name: "RG Shows (API 1)", url: "https://embed.rgshows.me/api/1/movie/?id=" },
                { name: "RG Shows (API 2)", url: "https://embed.rgshows.me/api/2/movie/?id=" },
                { name: "RG Shows (API 3)", url: "https://embed.rgshows.me/api/3/movie/?id=" },
                { name: "Rivestream", url: "https://rivestream.live/embed?type=movie&id=" },
                { name: "SmashyStream", url: "https://player.smashy.stream/movie/" },
                { name: "SpencerDevs", url: "https://embed.spencerdevs.xyz/movie/" },
                { name: "Videasy", url: "https://player.videasy.net/movie/" },
                { name: "VidFast", url: "https://vidfast.pro/movie/" },
                { name: "VidLink", url: "https://vidlink.pro/movie/" },
                { name: "Vidsrc.in", url: "https://vidsrc.in/embed/movie?tmdb=" },
                { name: "VidSrc.cc", url: "https://vidsrc.cc/v2/embed/movie/?autoPlay=false&tmdb=" },
                { name: "VidSrc.rip", url: "https://vidsrc.rip/embed/movie/" },
                { name: "VidSrc.su", url: "https://vidsrc.su/embed/movie/" },
                { name: "VidSrc.vip", url: "https://vidsrc.vip/embed/movie/" },
                { name: "VidStream", url: "https://vidstream.site/embed/movie/" },
            ];

            const urlParams = new URLSearchParams(window.location.search);
            const movieId = urlParams.get("id");

            if (!movieId) {
                document.body.innerHTML = "<h2 style='color: white; text-align: center;'>Invalid Movie ID</h2>";
                return;
            }

            // Get elements
            const movieFrame = document.getElementById("movieFrame");
            const sourceDropdown = document.getElementById("sourceDropdown");
            const sourceList = document.getElementById("sourceList");

            // Function to change iframe source
            function changeSource(url, listItem) {
                movieFrame.src = url + movieId;

                // Highlight selected source in dropdown (for mobile)
                sourceDropdown.value = url;

                // Remove active class from all list items
                document.querySelectorAll("#sourceList li").forEach(li => li.classList.remove("active"));

                // Add active class to the selected source in the sidebar (for desktop)
                if (listItem) {
                    listItem.classList.add("active");
                }
            }

            // Populate the dropdown and sidebar
            sources.forEach(source => {
                // Create sidebar list item
                const listItem = document.createElement("li");
                listItem.textContent = source.name;
                listItem.addEventListener("click", () => changeSource(source.url, listItem));
                sourceList.appendChild(listItem);

                // Create dropdown option
                const option = document.createElement("option");
                option.value = source.url;
                option.textContent = source.name;
                sourceDropdown.appendChild(option);
            });

            // Event listener for dropdown (mobile)
            sourceDropdown.addEventListener("change", function () {
                changeSource(this.value, null);
            });

            // Set default source
            changeSource(sources[0].url, document.querySelector("#sourceList li"));
        });
    </script>
    <script src="watch_script.js"></script>

</body>

</html>